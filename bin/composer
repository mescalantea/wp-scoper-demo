#!/bin/bash
BASEDIR="$(dirname $(realpath $0))/.."
# Tag 2.0.8 is the latest version supporting PHP 7.4
# Check if auth.json exists
if [ ! -f "$BASEDIR/auth.json" ]; then
    docker run --rm -v "$BASEDIR":/app -w /app -u $(id -u):$(id -g) composer:2.0.8 composer $@
else
    docker run --rm -v "$BASEDIR":/app -v "$(pwd)"/auth.json:/tmp/auth.json -w /app -u $(id -u):$(id -g) composer:2.0.8 composer $@
fi