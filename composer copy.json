{
    "name": "mescalantea/wp-scoper-demo",
    "type": "wordpress-plugin",
    "description": "A demo plugin to show how to use PHP Scoper",
    "config": {
        "platform": {
            "php": "7.2.0"
        },
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "composer/installers": true,
            "dealerdirect/phpcodesniffer-composer-installer": true
        }
    },
    "autoload": {
        "classmap": [
            "src/"
        ]
    },
    "autoload-dev": {
        "classmap": [
            "tests/"
        ]
    },
    "require": {
        "midrinet/toolkit": "dev-master#1.3.3",
        "php-di/php-di": "~6.0"
    },
    "require-dev": {
        "phpunit/phpunit": ">5.0",
        "yoast/phpunit-polyfills": "^1.0",
        "dealerdirect/phpcodesniffer-composer-installer": "^1.0.0",
        "humbug/php-scoper": "^0.17.5",
        "sniccwp/php-scoper-woocommerce-excludes": "dev-master",
        "sniccwp/php-scoper-wp-cli-excludes": "dev-master",
        "sniccowp/php-scoper-wordpress-excludes": "dev-master"
    },
    "repositories": [
        {
            "type": "vcs",
            "url": "git@gitlab.com:midrinet/toolkit.git"
        },
        {
            "type": "vcs",
            "url": "git@github.com:snicco/php-scoper-woocommerce-excludes.git"
        },
        {
            "type": "vcs",
            "url": "git@github.com:snicco/php-scoper-wp-cli-excludes.git"
        },
        {
            "type": "vcs",
            "url": "git@github.com:snicco/php-scoper-wordpress-excludes.git"
        }
    ],
    "scripts": {
        "post-install-cmd": [
            "@prefix-dependencies"
        ],
        "post-update-cmd": [
            "@prefix-dependencies"
        ],
        "prefix-dependencies": [
            "php-scoper add-prefix --output-dir=./third-party --force --quiet",
            "echo '{ \"autoload\": { \"classmap\": [\"\"] } }' > ./third-party/composer.json",
            "@composer dump-autoload --working-dir ./third-party --no-dev --classmap-authoritative",
            "sed -i'.bak' -e 's/Composer\\\\Autoload/Google_Web_Stories_Composer\\\\Autoload/' third-party/vendor/composer/*.php && rm -rf third-party/vendor/composer/*.php.bak",
            "echo '{ \"autoload\": { \"classmap\": [\"\"], \"files\": [\"polyfills/mbstring.php\"] } }' > ./includes/composer.json",
            "@composer dump-autoload --working-dir ./includes --no-dev --classmap-authoritative",
            "sed -i'.bak' -e 's/Composer\\\\Autoload/Google_Web_Stories_Composer\\\\Autoload/' includes/vendor/composer/*.php && rm -rf includes/vendor/composer/*.php.bak"
        ]
    }
}